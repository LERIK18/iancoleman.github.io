<!DOCTYPE html>
<html>
    <head>
        <title>
            Block Size Calculator
        </title>
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <link rel="stylesheet" href="css/app.css">
    </head>
    <body>
        <div class="container">
            <div class="about">
                <h1>Block Size Calculator</h1>
                <p>What is the effect of changing the bitcoin <code>MAX_BLOCK_SIZE</code>?</p>
            </div>
            <div class="past">
                <h1>Historical Context</h1>
                <div class="load">
                    <button class="btn btn-default">Load Data</button>
                    (<span class="size">large</span> file)
                </div>
                <div class="loading hidden">
                    Loading... may take quite a while
                </div>
                <div class="charts hidden">
                    <div class="range">
                        Between
                        <!-- min and max date set by javascript -->
                        <input class="start form-control medium" type="date" id="start" x-url-param>
                        and
                        <input class="end form-control medium" type="date" id="end" x-url-param>
                    </div>
                    <div class="stats">
                        <strong><span class="blocks">1053</span></strong>
                        blocks with an average block size of
                        <strong>
                            <span class="sizekb">660</span> kB
                            (<span class="sizetxs">353</span> txs)
                        </strong>
                        and an average mining rate of
                        1
                        block every
                        <strong><span class="timing">600</span></strong>
                        seconds.
                    </div>
                    <div class="chart">
                        <div class="row">
                            <div class="size col-md-6"></div>
                            <div class="txlength col-md-6"></div>
                        </div>
                        <div class="row">
                            <div class="timing col-md-6"></div>
                            <div class="timeseries col-md-6"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="parameters">
                <h1>Parameters</h1>
                Simulate a
                Max Block Size of
                <input class="block-size form-control small" type="number" value="1" id="block-size" x-url-param>
                MB at an average mining rate of
                <input class="blocks form-control small" type="number" value="1" id="block-rate" x-url-param>
                <span class="block-grammar">block</span>
                every
                <input class="time form-control small" type="number" value="600" id="block-period" x-url-param>
                seconds.
            </div>
            <div>
                <h1>Results</h1>
                <p>To support this scenario, the following constraints must be viable for all full nodes:</p>
                <table class="results table table-striped">
                    <thead>
                        <th>Constraint</th>
                        <th>Condition</th>
                        <th>Value</th>
                        <th>Unites</th>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Bandwidth</td>
                            <td>must be at least</td>
                            <td class="bandwidth">?</td>
                            <td>Mbps</td>
                        </tr>
                        <tr>
                            <td>Data Cap</td>
                            <td>must be at least</td>
                            <td class="data-cap">?</td>
                            <td>GB per 31 days</td>
                        </tr>
                        <tr>
                            <td>Supplied Disk Capacity</td>
                            <td>must be at least</td>
                            <td class="disk-consumption">?</td>
                            <td>GB per year</td>
                        </tr>
                        <tr>
                            <td>Transaction processing</td>
                            <td>must be at least</td>
                            <td class="processing">?</td>
                            <td>transactions per second</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div>
                <h1>Impact</h1>
                <p>
                    How does this affect the ability of the bitcoin network to
                    achieve
                    <a href="https://robotsfuckyeahalloneword.svbtle.com/bitcoin-goals-defined-by-the-whitepaper">
                       the requirements</a>?
                </p>
               <ul>
                   <li>
                       <strong>Trustless</strong> -
                       Online payments can be sent directly between two
                       parties without relying on a trusted third party.
                   </li>
                   <li>
                       <strong>Irreversible</strong> -
                       Payments are non-reversible.
                   </li>
                   <li>
                       <strong>Universal</strong> -
                       Transactions should fill the needs of transfer
                       regardless of value or purpose.
                   </li>
                   <li>
                       <strong>Incentivized</strong> -
                       Participation in line with the goals of bitcoin
                       should yield greater utility than participation
                       against the goals.
                   </li>
               </ul>
               <div class="costs">
                   <p>
                       A full node operator must be able to meet the following
                       ongoing costs whilst still remaining incentivized:
                   </p>
                    <table class="costs table table-striped">
                        <thead>
                            <th>Constraint</th>
                            <th>Price</th>
                            <th>Info</th>
                            <th class="text-right">Annual Cost</th>
                        </thead>
                        <tbody>
                            <tr class="bandwidth">
                                <td>
                                    <p class="form-control-static">
                                        Bandwidth
                                    </p>
                                </td>
                                <td>
                                    <select class="type form-control">
                                        <option value="unlimited">Unlimited</option>
                                        <option value="capped">Capped</option>
                                    </select>
                                    <div class="unlimited options">
                                        bandwidth for
                                        $<input class="price form-control small" value="70" type="number" id="unlimited-price" x-url-param>
                                        per
                                        <select class="time form-control">
                                            <option value="3600">hour</option>
                                            <option value="86400">day</option>
                                            <option value="604800">week</option>
                                            <option value="2628000" selected>month</option>
                                            <option value="31536000">year</option>
                                        </select>
                                        at
                                        <input class="speed form-control small" value="1000" type="number" id="unlimited-speed" x-url-param>
                                        Mbps
                                    </div>
                                    <div class="capped options hidden">
                                        bandwidth at
                                        <input class="size form-control small" value="1024" type="number" id="capped-size" x-url-param>
                                        GB per
                                        <select class="time form-control">
                                            <option value="3600">hour</option>
                                            <option value="86400">day</option>
                                            <option value="604800">week</option>
                                            <option value="2628000" selected>month</option>
                                            <option value="31536000">year</option>
                                        </select>
                                        for
                                        $<input class="price form-control small" value="49.99" type="number" id="capped-price" x-url-param>
                                    </div>
                                </td>
                                <td></td>
                                <td class="text-right">
                                    <p class="form-control-static">
                                        $<span class="total">?</span>
                                    </p>
                                </td>
                            </tr>
                            <tr class="disk">
                                <td>
                                    <p class="form-control-static">
                                        Supplied Disk Capacity
                                    </p>
                                </td>
                                <td>
                                    <input class="size form-control small" value="6" type="number" id="disk-size" x-url-param>
                                    TB drive for
                                    $<input class="price form-control small" value="114.99" type="number" id="disk-price" x-url-param>
                                </td>
                                <td></td>
                                <td class="text-right">
                                    <p class="form-control-static">
                                        $<span class="total">?</span>
                                    </p>
                                </td>
                            </tr>
                            <tr class="processing">
                                <td>
                                    <p class="form-control-static">
                                        Transaction Processing
                                    </p>
                                </td>
                                <td>
                                    $<input class="price form-control small" value="1000" type="number" id="processing-price" x-url-param>
                                    lifetime cost for computer to process
                                    <input class="rate form-control small" value="4000" type="number" id="processing-rate" x-url-param>
                                    tx/s
                                </td>
                                <td class="popup text-center">
                                    <p class="form-control-static">&plus;</p>
                                    <div class="popup-content">
                                        Total purchase and running cost for five year lifespan
                                    </div>
                                </td>
                                <td class="text-right">
                                    <p class="form-control-static">
                                        $<span class="total">?</span>
                                    </p>
                                </td>
                            </tr>
                            <tr class="labor">
                                <td>
                                    <p class="form-control-static">
                                        Labor
                                    </p>
                                </td>
                                <td>
                                    <input class="hours form-control small" value="50" type="number" id="labor-hours" x-url-param>
                                    hours per year at a rate of
                                    $<input class="price form-control small" value="100" type="number" id="labor-price" x-url-param>
                                    per hour
                                </td>
                                <td class="popup text-center" title="">
                                    <p class="form-control-static">&plus;</p>
                                    <div class="popup-content">
                                        Including research, setup, maintenance, etc
                                    </div>
                                </td>
                                <td class="text-right">
                                    <p class="form-control-static">
                                        $<span class="total">?</span>
                                    </p>
                                </td>
                            </tr>
                            <tr class="final">
                                <td></td>
                                <td></td>
                                <td></td>
                                <td class="text-right">
                                    <strong>TOTAL: $<span class="total">?</span></strong>
                                    <p>per year</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
               </div>
               <div class="complexity">
                   <h1>Complexity</h1>
                   <p>This is an <strong>extremely complex topic</strong> with subtlety and nuance.</p>
                   <ul>
                       <li>Bandwidth from newly announced blocks is not the only consumption of bandwidth resouces.</li>
                       <ul>
                           <li>Transaction relay</li>
                           <li>New nodes syncing old blocks</li>
                           <li>Other consumers of bandwidth</li>
                       </ul>
                       <li>Upload and download bandwidth is not uniform.</li>
                       <li>Bandwidth availability can vary depending on general ISP congestion.</li>
                       <li>Bitcoin does not use bandwidth in a uniform manner, tends to be in spikes.</li>
                       <li>Blocks may arrive before the last one is received or processed.</li>
                       <li>Transaction backlog and mempool requirements.</li>
                       <li>Fees and the fee market, and how this affects the incentive structure for all participants of the network.</li>
                       <li>The difference between miners and full nodes.</li>
                       <li>The impact of orphan blocks and reorgs.</li>
                       <li>Not all transaction processing produces the same cpu load.</li>
                       <li>The impact of SPV wallets and miners, ie varying degrees of verification.</li>
                       <li>The impact of alternative transaction techniques such as lightning network.</li>
                       <li>The impact of block propagation techniques such as invertible bloom lookup tables.</li>
                       <li>The impact of other bitcoin features that indirectly affect block size and propagation, such as replace-by-fee.</li>
                       <li>The risk of hard or soft fork to implement desired changes.</li>
                       <li>The value for max block size may be fixed or dynamic.</li>
                       <li>Frequency and magnitude of worst-case-scenarios and attacks is difficult to predict.</li>
                       <li>Factors-of-safety have not been considered.</li>
                   </ul>
                   <p>Without a full understanding of these complexities, there may be risk to changing the bitcoin max block size.</p>
               </div>
            </div>
        </div>

        <script src="js/select.js"></script>
        <script src="js/urlparams.js"></script>
        <script src="js/papaparse.min.js"></script>
        <script src="js/Chart.js"></script>
        <script src="js/block-data.js"></script>
        <script src="js/results.js"></script>

    </body>
</html>
